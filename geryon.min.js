!function(n,r){"use strict";function t(n){function e(){l=g=m=C=0,w=S=!1,v=new Array(u)}function o(n){var r=z();return setTimeout(function(){r.fire(n)},13),r.q}function c(){return w=!1,o()}function d(){return o()}function h(){var n=v[g];return f>n||n>a?c:q[A(n,g)]||d}var l,g,m,v,w,C,S,q,P,x,I,N,U=this;return U instanceof t?(n=n||{},P=n.warn||function(n){console.warn(n)},x=n.output||function(n){console.info(n)},I=n.input,e(),q={4:function(){return g=v[m],g%=p,o()},5:function(){var n;return I?(n=z(),I(function(r){U.input(r),n.fire()}),n.q):(P("No stdin is specified"),w=!1,o())},23:function(){return x(U.atA()),o()},39:function(){return g===m&&P("rotr is unsafe since c and d pointing the same address."),l=v[m]=O(v[m]),o()},40:function(){return m=v[m],m%=p,o()},62:function(){return g===m&&P("crz is unsafe since c and d pointing the same address."),l=v[m]=j(v[m],l),o()},81:function(){return w=!1,o()}},n.invertInOut&&(N=q[23],q[23]=q[5],q[5]=N),Object.defineProperties(this,{a:{get:function(){return l}},c:{get:function(){return g}},d:{get:function(){return m}},memory:{get:function(){return v.slice(0)}},step:{get:function(){return C}},running:{get:function(){return w}},loaded:{get:function(){return S}}}),this.input=function(n){n=b(n),l=-1==n?i:n},this.load=function(n){var t,o,i,c=[],f=[],a=0;if((n+s).split(s).forEach(function(n,r){var t=n.charCodeAt(0);return E(t)?void a++:(y(t,r-a)||c.push({position:r,code:n}),void f.push(t))}),c.length)throw new Error("Error on parsing program:"+n+"\nCaused by: "+c.map(function(n){return n.code+" at "+n.position}));if(f.length>u)throw new Error("Input program is too long. Length: "+f.length);for(e(),f.forEach(function(n,r){v[r]=n}),1==f.length&&(P("Undefined behaviour for 1 command programs"),v[1]=0),t=r.max(2,f.length),o=v[t-1],i=v[t-2];u>t;++t)v[t]=o=j(i,i=o);S=!0},void(this.run=function(n,r){function t(){r&&r(U)}function e(){n&&n(U)}function o(){w&&(C++,g++,m++,g%=p,m%=p)}function u(){var n;if(w){if(n=U.encrypt(v[g]))return void(v[g]=n.charCodeAt(0));P("Unable to encrypt command @c: "+v[g]),w=!1}}function i(){w?h()().then(e,u,o,i):t()}if(!U.loaded)throw new Error("No program was loaded.");w=!0,i()})):new t(n)}var e=10,o=3,u=r.pow(o,e),i=u-1,c=t.prototype,f=33,a=126,s="",p=u-1,d="5z]&gqtyfr$(we4{WP)H-Zn,[%\\3dL+Q;>U!pJS72FhOA1CB6v^=I_0/8|jsb9m<.TVac`uY*MK'X~xDl}REokN:#?G\"i@".split(s),h=94,l=function(){return Array.apply(null,new Array(e))},g=function(n){return v.map(function(r){return(n-(n%=r))/r})},m=[[1,0,0],[1,0,2],[2,2,1]],v=l().map(function(n,t){return r.pow(o,e-1-t)}),w={4:"i",5:"<",23:"/",39:"*",40:"j",62:"p",68:"o",81:"v"},y=function(n,r){return A(n,r)in w},b=function(n){return"number"==typeof n?n:(n+s).charCodeAt(0)},A=function(n,r){return n=b(n),(n+(r||0))%h},C=function(){return Object.keys(w).reduce(function(n,r){return n[w[r]]=r,n},{})}(),E=function(){var n=[9,10,13,32];return function(r){return n.indexOf(r)>-1}}(),j=function(n,r){return n=g(n),r=g(r),v.reduce(function(t,e,o){return t+e*m[n[o]][r[o]]},0)},O=function(n){return n=g(n),n.unshift(n.pop()),v.reduce(function(r,t,e){return r+t*n[e]},0)},z=function(){var n,r={},t={},e=[],o=!1,u=function(){},i=0,c=function(r){var t=r(n);return t&&t.then?(t.then(function(r){n=r,i++,f()}),!1):(n=t,i++,!0)},f=function(n){for(;(n=e[i])&&c(n););o=o||i==e.length},a=function(r){return n=r,a=u,f(),t},s=function(){return e.push.apply(e,arguments),o&&f(),t};return Object.defineProperties(r,{q:{get:function(){return t}},fire:{get:function(){return a}}}),Object.defineProperty(t,"then",{get:function(){return s}}),r};c.encrypt=function(n){return d[b(n)-f]},c.crz=j,c.rotr=O,c.atA=function(){var n=this.a;return n===i?-1:String.fromCharCode(n%256)},c.denormalize=function(n){var r=0;return(n+s).split(s).map(function(n,t){var e=n.charCodeAt(0);if(E(e))return r++,n;if(e=C[n]){for(t-=r%=h,e-=t;f>e;)e+=h;return String.fromCharCode(e)}throw new Error("Symbol "+n+" at "+t+" is illegal.")}).join(s)},c.normalize=function(n){var r=0;return(n+s).split(s).map(function(n,t){var e=n.charCodeAt(0);if(E(e))return r++,n;if(e=w[A(e,t-r)])return e;throw new Error("Symbol "+n+" at "+t+" is illegal.")}).join(s)},n.Î“=t}(this,Math);