!function(n,r){"use strict";function t(n){function e(){l=g=m=C=0,w=S=!1,v=new Array(i)}function o(){return z().fire()}function c(){return w=!1,o()}function h(){return o()}function p(){var n=v[g];return f>n||n>a?c:P[A(n,g)]||h}var l,g,m,v,w,C,S,P,x,N,U,k=this;return k instanceof t?(n=n||{},x=n.warn||function(n){console.warn(n)},N=n.output||function(n){console.info(n)},U=n.input,e(),P={4:function(){return g=v[m],g%=d,o()},5:function(){return U?U().then(function(n){k.input(n)}):(x("No stdin is specified"),w=!1,o())},23:function(){return N(k.atA()),o()},39:function(){return g===m&&x("rotr is unsafe since c and d pointing the same address."),l=v[m]=O(v[m]),o()},40:function(){return m=v[m],m%=d,o()},62:function(){return g===m&&x("crz is unsafe since c and d pointing the same address."),l=v[m]=j(v[m],l),o()},81:function(){return w=!1,o()}},Object.defineProperties(this,{a:{get:function(){return l}},c:{get:function(){return g}},d:{get:function(){return m}},memory:{get:function(){return v.slice(0)}},step:{get:function(){return C}},running:{get:function(){return w}},loaded:{get:function(){return S}}}),this.input=function(n){n=b(n),l=-1==n?u:n},this.load=function(n){var t,o,u,c=[],f=[],a=0;if((n+s).split(s).forEach(function(n,r){var t=n.charCodeAt(0);return E(t)?void a++:(y(t,r-a)||c.push({position:r,code:n}),void f.push(t))}),c.length)throw new Error("Error on parsing program:"+n+"\nCaused by: "+c.map(function(n){return n.code+" at "+n.position}));if(f.length>i)throw new Error("Input program is too long. Length: "+f.length);for(e(),f.forEach(function(n,r){v[r]=n}),1==f.length&&(x("Undefined behaviour for 1 command programs"),v[1]=0),t=r.max(2,f.length),o=v[t-1],u=v[t-2];i>t;++t)v[t]=o=j(u,u=o);S=!0},void(this.run=function(n,r){function t(){r&&r(k)}function e(){n&&n(k)}function o(){w&&(C++,g++,m++,g%=d,m%=d)}function i(){var n;if(w){if(n=k.encrypt(v[g]))return void(v[g]=n.charCodeAt(0));x("Unable to encrypt command @c: "+v[g]),w=!1}}function u(){w?p()().then(e).then(i).then(o).then(u):t()}if(!k.loaded)throw new Error("No program was loaded.");w=!0,u()})):new t(n)}var e=10,o=3,i=r.pow(o,e),u=i-1,c=t.prototype,f=33,a=126,s="",d=i-1,h="5z]&gqtyfr$(we4{WP)H-Zn,[%\\3dL+Q;>U!pJS72FhOA1CB6v^=I_0/8|jsb9m<.TVac`uY*MK'X~xDl}REokN:#?G\"i@".split(s),p=function(){return Array.apply(null,new Array(e))},l=function(n){return m.map(function(r){return(n-(n%=r))/r})},g=[[1,0,0],[1,0,2],[2,2,1]],m=p().map(function(n,t){return r.pow(o,e-1-t)}),v={4:"i",5:"<",23:"/",39:"*",40:"j",62:"p",68:"o",81:"v"},w=94,y=function(n,r){return A(n,r)in v},b=function(n){return"number"==typeof n?n:(n+s).charCodeAt(0)},A=function(n,r){return n=b(n),(n+(r||0))%w},C=function(){return Object.keys(v).reduce(function(n,r){return n[v[r]]=r,n},{})}(),E=function(){var n=[9,10,13,32];return function(r){return n.indexOf(r)>-1}}(),j=function(n,r){return n=l(n),r=l(r),m.reduce(function(t,e,o){return t+e*g[n[o]][r[o]]},0)},O=function(n){return n=l(n),n.unshift(n.pop()),m.reduce(function(r,t,e){return r+t*n[e]},0)},z=function(){var n,r={},t={},e=[],o=!1,i=function(){},u=0,c=function(r){var t=r(n);return t&&t.then?(t.then(function(r){n=r,u++,f()}),!1):(n=t,u++,!0)},f=function(){for(var n;(n=e[u])&&c(n););u===e.length&&(o=!0)},a=function(r){return n=r,a=i,f(),t},s=function(n){return e.push(n),o&&f(),t};return Object.defineProperties(r,{q:{get:function(){return t}},fire:{get:function(){return a}}}),Object.defineProperties(t,{then:{get:function(){return s}}}),r};c.encrypt=function(n){return h[b(n)-f]},c.crz=j,c.rotr=O,c.atA=function(){var n=this.a;return n===u?-1:String.fromCharCode(n%256)},c.denormalize=function(n){var r=0;return(n+s).split(s).map(function(n,t){var e=n.charCodeAt(0);if(E(e))return r++,n;if(e=C[n]){for(t-=r%=w,e-=t;f>e;)e+=w;return String.fromCharCode(e)}throw new Error("Symbol "+n+" at "+t+" is illegal.")}).join(s)},c.normalize=function(n){var r=0;return(n+s).split(s).map(function(n,t){var e=n.charCodeAt(0);if(E(e))return r++,n;if(e=v[A(e,t-r)])return e;throw new Error("Symbol "+n+" at "+t+" is illegal.")}).join(s)},n.Î“=t}(this,Math);